# syntax=docker/dockerfile:1
ARG CONTAINER_IMAGE

FROM ${CONTAINER_IMAGE}
#ARG DEBIAN_FRONTEND=noninteractive

# ====[ DEPENDENCIES ]====
# Settings for tzdata - https://serverfault.com/questions/949991/how-to-install-tzdata-on-a-ubuntu-docker-image
ENV TZ=Europe/Rome
RUN apt-get update

# 1.1 PHP EXTENSION - DATABASE
RUN docker-php-ext-install mysqli pdo pdo_mysql
RUN docker-php-ext-enable mysqli
# 1.1 PHP EXTENSION - GD
#RUN docker-php-ext-configure gd --with-freetype --with-jpeg
#RUN docker-php-ext-install -j$(nproc) gd

# Install Web Server: Apache
#RUN apt install apache2 -y
# Install PHP and PHP Support for Apache, and other extensions (php-mysql)
#RUN apt install php libapache2-mod-php php-bcmath php-curl php-imagick php-intl php-json php-mbstring php-mysql php-xml php-zip -y
# Install database MySQL - NO-THREE TIER ARCHITECTURE
#RUN apt install mysql-server -y

# ====[ SET UP FTWS ]====
#RUN mkdir -p /srv/ftws
#COPY ./ftws /srv/ftws
#COPY ftws-vhost.conf /etc/apache2/sites-available/ftws.conf

#RUN a2ensite ftws
#RUN chown -R www-data:www-data /srv/ftws

#RUN a2dissite 000-default

# ====[ RUN SERVICES ]====
# Run Apache Web Server - https://stackoverflow.com/questions/49764989/cannot-start-apache-automatically-with-docker
#CMD ["/usr/sbin/apachectl", "-D", "FOREGROUND"]


